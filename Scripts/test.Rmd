---
title: "Test Helpers"
author: "Tom Naber"
date: "`r format(Sys.Date(), '%B %d, %Y')`"

knit: (function(input, ...) {
  move_script <- here::here("Scripts", "move_output.R");
  output_folder <- here::here("Output");
  rmarkdown::render(input, params = "ask");
  source(move_script);
  move_output(input, output_folder)})
  
output:
  html_document:
    theme: cosmo
    toc: true
    toc_float: true
    number_sections: true
    df_print: paged
    highlight: tango
    self_contained: true
    fig_width: 6.4
    fig_height: 4.8
    code_folding: hide
    
editor_options:
  markdown:
    wrap: 80
  chunk_output_type: inline
---

# Set-up

## Set options & import sources

```{r setup, include=FALSE, cache = FALSE}
knitr::opts_chunk$set(fig.width = 6.4,
                      fig.height = 4.8,
                      dpi = 300,
                      fig.retina = 1,
                      out.width = "100%",
                      out.height = "100%",
                      dev = "ragg_png")

knitr::opts_knit$set(root.dir = here::here())

options(contrasts = c("contr.sum", "contr.poly"))

library(ggplot2)
library(ragg)
library(here)
library(sameplot)

source(here("Scripts", "universal_helpers.R"))
```

# Make plot

```{r}
p <- ggplot2::ggplot(mtcars, ggplot2::aes(wt, mpg)) + ggplot2::geom_point()
```

# Sameplot render (save and include)

```{r}
sameplot(p, file = file.path("Output", "plot.png"), save = TRUE)
```

# Knitr/RStudio backend render

```{r}
p
```

# Render raw file absolutely

```{r, echo=FALSE, results="asis"}
knitr::asis_output(sprintf(
  '<img src="%s">',
  knitr::image_uri(here::here("Output", "plot.png"))
))
```



